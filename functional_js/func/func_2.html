<html lang="kr">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
  </head>
  <body>
    <script type="text/javascript" src="../js/func.js"></script>
    <script>
      const log = a => {
        return console.log(a);
      };
      // log("hello world!");

      const users = [
        { id: 1, name: "qw", age: 36 },
        { id: 2, name: "XX", age: 32 },
        { id: 3, name: "gg", age: 32 },
        { id: 4, name: "vv", age: 27 },
        { id: 5, name: "cx", age: 25 },
        { id: 6, name: "er", age: 26 },
        { id: 7, name: "WR", age: 31 },
        { id: 8, name: "OO", age: 23 },
      ];
      /*
      const _filter = (list, predi) => {
        let new_list = [];
        for (let i = 0; i < list.length; i++) {
          if (predi(list[i])) {
            new_list.push(list[i]);
          }
        }
        return new_list;
      };

      function _map(list, mapper) {
        let new_list = [];
        for (let i = 0; i < list.length; i++) {
          new_list.push(mapper(list[i]));
        }
        return new_list;
      }
      */
      const over_30 = _filter(users, function (user) {
        return user.age >= 30;
      });
      log(over_30);
      let names = _map(over_30, function (user) {
        return user.name;
      });
      log(names);
      let under_30 = _filter(users, function (user) {
        return user.age < 30;
      });
      log(under_30);
      let ages = _map(under_30, function (user) {
        return user.age;
      });
      log(ages);

      log(
        _map(
          _filter(users, function (user) {
            return user.age >= 30;
          }),
          function (user) {
            return user.name;
          }
        )
      );
      log(
        _map(
          _filter(users, function (user) {
            return user.age < 30;
          }),
          function (user) {
            return user.age;
          }
        )
      );

      /* 외부 다형성 */
      // 1. array_like, argument, document.querySelectorAll

      log(document.querySelectorAll("*"));

      log(
        _map(document.querySelectorAll("*"), function (node) {
          return node.nodeName;
        })
      );

      /* 내부 다형성 */
      // 1. predi, iter, mapper

      log(
        _map([1, 2, 3, 4], function (v) {
          return v + 10;
        })
      );
    </script>
  </body>
</html>
